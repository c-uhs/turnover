\input{../config.tex}
\input{config.tex}
% colors
\newcommand{\colorx}{C1}
\newcommand{\colort}{\colorx}
\newcommand{\colorw}{\colorx}
% pie charts
\newlength{\rad}\setlength{\rad}{6mm}
\newlength{\dx}\setlength{\dx}{0.5mm}
\newcounter{pa}\setcounter{pa}{0}
\newcounter{pb}\setcounter{pb}{0}
\newcommand{\pie}[4]{
  \node[pie=2*\rad-\dx] (#1) at (#2,#3){};
  \node[pie=2*\rad+\dx] at (#2,#3){};
  \foreach \i/\c in {#4}{
    \addtocounter{pb}{\i}
    \fill[color=\c] (#2,#3)
    -- ([shift={(#2,#3)}] 90-\thepa:\rad) arc (90-\thepa:90-\thepb:\rad)
    -- cycle;
    \addtocounter{pa}{\i}
  }
}
% layers
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}
% document
\begin{document}
\begin{tikzpicture}[
  pie/.style = {
    circle,
    fill=black,
    minimum size=#1,
    inner sep=0pt,
    anchor=center,
  },
  tarrow/.style = {
    wide=\turnover,
    fill=none,
    -{Latex[length=3.5mm]},
  }
]
\pie{x1}{0}{4}{\xIhigh/I!80!white,\xThigh/T!60!white,\xShigh/S!40!white}
\pie{x2}{0}{2}{ \xImed/I!80!white, \xTmed/T!60!white, \xSmed/S!40!white}
\pie{x3}{0}{0}{ \xIlow/I!80!white, \xTlow/T!60!white, \xSlow/S!40!white}
\begin{pgfonlayer}{background}
\draw[arrow,tarrow] (x3.020) to[bend right=70] (x1.340);
\draw[arrow,tarrow] (x1.210) to[bend right=70] (x3.160);
\draw[arrow,tarrow] (x2.040) to[bend right=40] (x1.320);
\draw[arrow,tarrow] (x1.230) to[bend right=40] (x2.140);
\draw[arrow,tarrow] (x3.040) to[bend right=40] (x2.320);
\draw[arrow,tarrow] (x2.240) to[bend right=40] (x3.140);
\end{pgfonlayer}
\end{tikzpicture}
\end{document}
% eof
