% beamer style
\usetheme{Malmoe}
\definecolor{C1}{HTML}{224466}
\definecolor{C2}{HTML}{CC3300}
\definecolor{C3}{HTML}{666666}
\setbeamercolor{title}     {fg=C1}
\setbeamercolor{frametitle}{fg=C1}
\setbeamercolor{structure} {fg=C1}
\setbeamercolor{label}     {fg=C2}
\setbeamercolor{section}   {fg=white,bg=C1}
\setbeamercolor{subsection}{fg=white,bg=C1!60!white}
\setbeamercolor{link}      {fg=white,bg=C1}
\setbeamersize{text margin left=1em,text margin right=1em}
\setbeamertemplate{frametitle continuation}{}
\setbeamertemplate{bibliography item}{\colortext{C2}{\insertbiblabel}}
\setbeamertemplate{caption}{\centering\footnotesize{\insertcaption}\par}
\usefonttheme{serif}
\beamertemplatetransparentcoveredhigh
% colors
\let\oldcite=\cite
\renewcommand{\cite}[1]{{\scriptsize\textcolor{purple}{\oldcite{#1}}}}
\setbeamercolor{emph}{fg=C2}
\renewcommand<>{\emph}[1]{{\usebeamercolor[fg]{emph}\only#2{\bfseries}#1}}
% misc
\renewcommand*{\bibfont}{\tiny}
\setlength{\parskip}{0pt}
\setlength{\tabcolsep}{6pt}
\setlength{\belowcaptionskip}{-8pt}
% pseudo captions
\newcommand{\pseudocap}[1]{\begin{center}\footnotesize{#1}\end{center}}
% tikz
\usetikzlibrary{positioning,quotes,calc,arrows.meta}
\tikzset{%
  arrow/.style = {
    ->,
    > = latex,
    very thick,
    rounded corners,
    fill = #1,
    draw = #1,
  },
  tbox/.style = {
    thick,
    rounded corners,
    fill = #1!20!white,
    draw = #1!80!white,
    align = center,
    minimum width = 0.8cm,
    minimum height = 0.6cm,
    node distance = 1.5cm,
  },
  legend/.style = {
    text width = 1.4cm,
    align=left,
  },
  pie/.style = {
    anchor=center,
    node distance=0.8cm,
  },
  callout/.style = {
    draw = \colorf,
    thick,
    circle,
    minimum width = 1cm,
  },
}
% footer & frame number
\expandafter\def\expandafter\insertshorttitle\expandafter{%
  \insertshorttitle\hspace{\stretch{100}}%
  \insertframenumber\,/\,\inserttotalframenumber}
\let\oldshortauthor=\insertshortauthor
\renewcommand{\insertshortauthor}{\textcolor{gray}{\oldshortauthor}}
\beamertemplatenavigationsymbolsempty
% itemize
\setbeamercolor{itemize item}{fg=C1!100!white}
\setbeamercolor{itemize subitem}{fg=C1!60!white}
\settowidth{\leftmargini}{\usebeamertemplate{itemize item}}
\addtolength{\leftmargini}{\labelsep}
%\xpatchcmd{\itemize}{\def\makelabel}{\setlength{\itemsep}{0.2em}\def\makelabel}{}{}
% itemize spacing
\let\tmpitemize\itemize
\let\tmpenditemize\enditemize
\renewenvironment{itemize}{\tmpitemize\addtolength{\itemsep}{0.2\baselineskip}}{\tmpenditemize}
% increase spacing below title
\addtobeamertemplate{frametitle}{}{\vspace*{0.3cm}}
% title block
\setbeamercolor*{title}{use=structure,fg=white,bg=structure.fg}
% logo
%\addtobeamertemplate{titlepage}{}{
%  \begin{tikzpicture}[overlay,remember picture]
%    \node[anchor=north east] at ($(current page.north east)+(0cm,0.1cm)$)
%      {\includegraphics[width=4cm]{isstdr-wide}};
%  \end{tikzpicture}
%}
% tikz logo
%\newlength{\da}\setlength{\da}{0.3cm}
%\usebackgroundtemplate{
%  \begin{tikzpicture}[overlay,remember picture] 
%    \coordinate (ne) at (current page.north east);
%    \coordinate (sw) at (current page.south west);
%    \foreach \i/\c in {1/40,2/20,3/10,4/5}{
%      \draw[dazzle=\c]            ($(ne)+(-0.3\da,-\i\da)$) circle (\i\da);
%      \draw[dazzle=\c,->,>=latex] ($(ne)+(-0.3\da,-\i\da-\i\da)$) -- ++(\da,0);
%      \draw[dazzle=\c]            ($(sw)+(+0.3\da,-2\da+\i\da)$) circle (\i\da);
%    }
%  \end{tikzpicture}
%}